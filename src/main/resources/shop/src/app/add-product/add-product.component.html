<app-navigation></app-navigation>
<form class="container" role="form" [formGroup]="addProductForm" (ngSubmit)="addProduct(addProductForm)">
  <h4>
    {{ language.addProduct }}
  </h4>
  <p>
    {{ language.addProductDescription }}
  </p>
  <div class="form-group">
    <mat-form-field class="form-element">
      <input matInput placeholder="{{language.name}}" formControlName="name"/>
      <mat-error *ngIf="addProductForm.get('name').touched && addProductForm.get('name').hasError('required')">
        {{ language.required }}
      </mat-error>
    </mat-form-field>
  </div>
  <div class="form-group">
    <mat-form-field class="form-element">
      <input matInput placeholder="{{language.code}}" formControlName="code"/>
      <mat-error *ngIf="addProductForm.get('code').touched && addProductForm.get('code').hasError('required')">
        {{ language.required }}
      </mat-error>
    </mat-form-field>
  </div>
  <div class="form-group">
    <mat-form-field class="form-element">
      <input matInput placeholder="{{language.description}}" formControlName="description"/>
      <mat-error
        *ngIf="addProductForm.get('description').touched && addProductForm.get('description').hasError('required')">
        {{ language.required }}
      </mat-error>
    </mat-form-field>
  </div>
  <div class="form-group">
    <mat-form-field class="form-element">
      <input type="number" matInput placeholder="{{language.amountDin}}" formControlName="amountDin"/>
      <mat-error
        *ngIf="addProductForm.get('amountDin').touched && addProductForm.get('amountDin').hasError('required')">
        {{ language.required }}
      </mat-error>
    </mat-form-field>
  </div>
  <div class="form-group">
    <mat-form-field class="form-element">
      <input type="number" matInput placeholder="{{language.amountEuro}}" formControlName="amountEuro"/>
      <mat-error
        *ngIf="addProductForm.get('amountEuro').touched && addProductForm.get('amountEuro').hasError('required')">
        {{ language.required }}
      </mat-error>
    </mat-form-field>
  </div>
  <div class="form-group">
    <mat-form-field class="form-element">
      <input type="number" matInput placeholder="{{language.quantity}}" formControlName="quantity"/>
      <mat-error *ngIf="addProductForm.get('quantity').touched && addProductForm.get('quantity').hasError('required')">
        {{ language.required }}
      </mat-error>
    </mat-form-field>
  </div>
  <div class="form-group" *ngIf="selectedSubcategory != undefined">
    <mat-label>
      {{ language.subcategory }}
    </mat-label>
    <mat-radio-group class="subcategory-buttons">
      <mat-radio-button *ngFor="let subcategory of subcategories" [value]="subcategory"
                        [checked]="selectedSubcategory === subcategory.name"
                        (change)="selectSubcategory(subcategory.name)">
        {{subcategory.name}}
      </mat-radio-button>
    </mat-radio-group>
  </div>

  <ngx-dropzone (change)="onSelect($event)">
    <ngx-dropzone-label>
      {{ language.dropFiles }}
    </ngx-dropzone-label>
    <ngx-dropzone-preview *ngFor="let f of files" [removable]="true" (removed)="onRemove(f)">
      <ngx-dropzone-label>{{ f.name }} ({{ f.type }})</ngx-dropzone-label>
    </ngx-dropzone-preview>
  </ngx-dropzone>
  <button mat-button color="primary" type="submit" class="form-control" [disabled]="addProductForm.invalid">
    {{ language.addProduct }}
  </button>
  <div class="form-group">
    <mat-error class="formError" *ngIf="addProductForm.get('name').touched
              && addProductForm.get('code').touched
              && addProductForm.get('description').touched
              &&  addProductForm.get('amountDin').touched
              && addProductForm.get('amountEuro').touched
              && addProductForm.get('quantity').touched
              && addProductForm.invalid">
      Please enter valid data!
    </mat-error>
  </div>
</form>
